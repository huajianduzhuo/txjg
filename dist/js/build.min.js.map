{"version":3,"sources":["texiao.js","txjg.js"],"names":["init","hw","htmlE","offsetWidth","hh","offsetHeight","canvas","width","height","document","getElementById","context","getContext","documentElement","balls","window","onresize","onload","Ball","x","y","direct","_classCallCheck","this","globalAlpha","color","Math","cos","sin","beginPath","strokeStyle","arc","PI","stroke","setInterval","clearRect","forEach","ball","paint","set","index","splice","moveCallback","event","node","target","srcElement","nodeName","mx","clientX","my","clientY","random","push","onmousemove","ontouchmove","search","btn","del","searchList","dls","querySelectorAll","Array","from","dts","dds","dramaSerialSelector","dramaSerialSelectors","dt","i","id","onkeydown","keyCode","preventDefault","onkeyup","onclick","innerHTML","ids","resList","valueArr","value","split","dd","content","textContent","indexOf","replace","eval","title","result","count","res","sort","res1","res2","length","li","createElement","appendChild","selector","dl","className","s","addEventListener","cancelable","defaultPrevented"],"mappings":"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","file":"build.min.js","sourcesContent":["const canvas = document.getElementById('canvas');\r\nconst context = canvas.getContext('2d');\r\nconst htmlE = document.documentElement;\r\nlet balls = [];\r\n\r\nfunction init() {\r\n  let hw = htmlE.offsetWidth;\r\n  let hh = htmlE.offsetHeight;\r\n  canvas.width = hw;\r\n  canvas.height = hh;\r\n}\r\n\r\nwindow.onresize = window.onload = init;\r\n\r\nclass Ball {\r\n  constructor(x, y, direct) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.globalAlpha = 1;\r\n    this.color = 'rgb(255,192,203)';\r\n    this.direct = direct;\r\n  }\r\n\r\n  set() {\r\n    this.x += Math.cos(this.direct);\r\n    this.y += Math.sin(this.direct);\r\n    if (this.globalAlpha > 0) {\r\n      this.globalAlpha = this.globalAlpha - 0.005;\r\n    } else {\r\n      this.globalAlpha = 0;\r\n    }\r\n  }\r\n\r\n  paint() {\r\n    if (this.globalAlpha <= 0) {\r\n      return;\r\n    }\r\n    context.beginPath();\r\n    context.globalAlpha = this.globalAlpha;\r\n    context.strokeStyle = this.color;\r\n    context.arc(this.x, this.y, 4, 0, Math.PI * 2, true);\r\n    context.stroke();\r\n  }\r\n}\r\n\r\nsetInterval(() => {\r\n  context.clearRect(0, 0, canvas.width, canvas.height);\r\n  balls.forEach(ball => {\r\n    ball.paint();\r\n    ball.set();\r\n  })\r\n}, 10);\r\n\r\nsetInterval(() => {\r\n  balls.forEach((ball, index) => {\r\n    if (ball.globalAlpha <= 0) {\r\n      balls.splice(index, 1);\r\n    }\r\n  })\r\n}, 1000);\r\n\r\nlet moveCallback = event => {\r\n  event = event || window.event;\r\n  let target = event.target || event.srcElement;\r\n  let node = target.nodeName;\r\n  if (node === 'LI' || node === 'INPUT' || node === 'A' || node === 'BUTTON') {\r\n    return;\r\n  }\r\n  let mx = event.clientX;\r\n  let my = event.clientY;\r\n  let direct = Math.random() * 2 * Math.PI;\r\n  let ball = new Ball(mx, my, direct);\r\n  balls.push(ball);\r\n}\r\n\r\ndocument.onmousemove = moveCallback;\r\ndocument.ontouchmove = moveCallback;","let search = document.getElementById('search');\r\nlet btn = document.getElementById('btn');\r\nlet del = document.getElementById('del');\r\nlet searchList = document.getElementById('searchList');\r\nlet dls = document.querySelectorAll('dl');\r\ndls = Array.from(dls);\r\nlet dts = document.querySelectorAll('dt');\r\ndts = Array.from(dts);\r\nlet dds = document.querySelectorAll('dd');\r\ndds = Array.from(dds);\r\nlet dramaSerialSelector = document.getElementById('dramaSerialSelector');\r\nlet dramaSerialSelectors = document.querySelectorAll('#dramaSerialSelector > li');\r\ndramaSerialSelectors = Array.from(dramaSerialSelectors);\r\ndts.forEach((dt, i) => {\r\n  dt.id = `til${i}`;\r\n});\r\nsearch.onkeydown = function (event) {\r\n  event = event || window.event;\r\n  if(event.keyCode === 13){\r\n    if(event.preventDefault){\r\n      event.preventDefault();\r\n    }else{\r\n      return false;\r\n    }\r\n  }\r\n}\r\nsearch.onkeyup = btn.onclick = function (event) {\r\n  if (event.keyCode === 13 || event.target.nodeName === 'BUTTON') {\r\n    event.preventDefault();\r\n    searchList.innerHTML = \"\";\r\n    let ids = [];\r\n    let resList = [];\r\n    let valueArr = search.value.split(\"\");\r\n    valueArr.forEach((value) => {\r\n      dds.forEach((dd, index) => {\r\n        let content = dd.textContent;\r\n        if (content.indexOf(value) >= 0) {\r\n          let i = content.indexOf(value);\r\n          /* let startC = content.substring(0, i);\r\n          let start = (startC.lastIndexOf(\"？\") > startC.lastIndexOf('。') ? startC.lastIndexOf(\"？\") : startC.lastIndexOf(\"。\")) + 1;\r\n          let end = (content.indexOf(\"？\", i) > content.indexOf('。', i) ? content.indexOf(\"？\", i) : content.indexOf(\"。\", i)) + 1;\r\n          let res = content.substring(start, end); */\r\n          content = content.replace(eval('/' + value + '/g'), \"<span class=\\\"result\\\">\" + value + \"</span>\");\r\n          let title = dts[index].textContent;\r\n          if (ids.indexOf(index) < 0) {\r\n            ids.push(index);\r\n            let result = {\r\n              count: 0,\r\n              res: content,\r\n              title: title,\r\n              id: index\r\n            };\r\n            resList.push(result);\r\n          } else {\r\n            let result = resList[ids.indexOf(index)];\r\n            result.count++;\r\n            let res = result.res;\r\n            result.res = res.replace(eval('/' + value + '/g'), \"<span class=\\\"result\\\">\" + value + \"</span>\");\r\n          }\r\n        }\r\n      });\r\n    });\r\n    resList.sort((res1, res2) => {\r\n      return (res2.count - res1.count) || (res1.id - res2.id);\r\n    })\r\n    resList.forEach(result => {\r\n      if (valueArr.length <= 2 || result.count >= (valueArr.length / 2)) {\r\n        let li = document.createElement('li');\r\n        li.innerHTML = `<span><a href=\"#til${result.id}\">${result.title}</a></span><span>:</span><span>${result.res}</span>`;\r\n        searchList.appendChild(li);\r\n      }\r\n    });\r\n    init();\r\n  }\r\n}\r\n\r\ndel.onclick = function () {\r\n  search.value = \"\";\r\n}\r\n\r\ndramaSerialSelectors.forEach((selector, index) => {\r\n  selector.onclick = function (event) {\r\n    dls.forEach(dl => {\r\n      dl.className = 'hide'\r\n    });\r\n    dls[index].className = 'show';\r\n    dramaSerialSelectors.forEach(s => {\r\n      s.className = ''\r\n    });\r\n    selector.className = 'active';\r\n    init();\r\n  }\r\n})\r\n\r\ndocument.addEventListener('touchmove', function (event) {\r\n  if (event.cancelable) {\r\n    // 判断默认行为是否已经被禁用\r\n    if (!event.defaultPrevented) {\r\n      event.preventDefault();\r\n    }\r\n  }\r\n})\r\n\r\n"]}