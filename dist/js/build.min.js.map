{"version":3,"sources":["texiao.js","load.js"],"names":["init","hw","htmlE","offsetWidth","hh","offsetHeight","canvas","width","height","app","Vue","el","data","search","loading","dramaSerial","dramaSerialIndex","searchResult","methods","handleSelect","index","this","$","addClass","eq","removeClass","handleSearch","dds","dts","ids","resList","valueArr","split","forEach","value","each","dd","content","text","indexOf","i","replace","eval","title","push","result","count","res","id","sort","res1","res2","console","log","length","mounted","_this","get","match","Jdata","find","append","document","addEventListener","event","cancelable","defaultPrevented","preventDefault","getElementById","context","getContext","documentElement","balls","window","onresize","onload","Ball","x","y","direct","_classCallCheck","globalAlpha","color","Math","cos","sin","beginPath","strokeStyle","arc","PI","stroke","setInterval","clearRect","ball","paint","set","splice","moveCallback","node","target","srcElement","nodeName","mx","clientX","my","clientY","type","changedTouches","random","onmousemove","ontouchmove"],"mappings":"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","file":"build.min.js","sourcesContent":["const canvas = document.getElementById('canvas');\r\nconst context = canvas.getContext('2d');\r\nconst htmlE = document.documentElement;\r\nlet balls = [];\r\n\r\nfunction init() {\r\n  let hw = htmlE.offsetWidth;\r\n  let hh = htmlE.offsetHeight;\r\n  canvas.width = hw;\r\n  canvas.height = hh;\r\n}\r\n\r\nwindow.onresize = window.onload = init;\r\n\r\nclass Ball {\r\n  constructor(x, y, direct) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.globalAlpha = 1;\r\n    this.color = 'rgb(255,192,203)';\r\n    this.direct = direct;\r\n  }\r\n\r\n  set() {\r\n    this.x += Math.cos(this.direct);\r\n    this.y += Math.sin(this.direct);\r\n    if (this.globalAlpha > 0) {\r\n      this.globalAlpha = this.globalAlpha - 0.005;\r\n    } else {\r\n      this.globalAlpha = 0;\r\n    }\r\n  }\r\n\r\n  paint() {\r\n    if (this.globalAlpha <= 0) {\r\n      return;\r\n    }\r\n    context.beginPath();\r\n    context.globalAlpha = this.globalAlpha;\r\n    context.strokeStyle = this.color;\r\n    context.arc(this.x, this.y, 4, 0, Math.PI * 2, true);\r\n    context.stroke();\r\n  }\r\n}\r\n\r\nsetInterval(() => {\r\n  context.clearRect(0, 0, canvas.width, canvas.height);\r\n  balls.forEach(ball => {\r\n    ball.paint();\r\n    ball.set();\r\n  })\r\n}, 10);\r\n\r\nsetInterval(() => {\r\n  balls.forEach((ball, index) => {\r\n    if (ball.globalAlpha <= 0) {\r\n      balls.splice(index, 1);\r\n    }\r\n  })\r\n}, 1000);\r\n\r\nlet moveCallback = event => {\r\n  event = event || window.event;\r\n  let target = event.target || event.srcElement;\r\n  let node = target.nodeName;\r\n  if (node === 'LI' || node === 'INPUT' || node === 'A' || node === 'BUTTON') {\r\n    return;\r\n  }\r\n  let mx = event.clientX;\r\n  let my = event.clientY;\r\n  if (event.type === 'touchmove' && event.changedTouches.length === 1) {\r\n    mx = event.changedTouches[0].clientX;\r\n    my = event.changedTouches[0].clientY;\r\n  }\r\n  if (!mx) {\r\n    return;\r\n  }\r\n  let direct = Math.random() * 2 * Math.PI;\r\n  let ball = new Ball(mx, my, direct);\r\n  balls.push(ball);\r\n}\r\n\r\ndocument.onmousemove = moveCallback;\r\ndocument.ontouchmove = moveCallback;","let app = new Vue({\r\n  el: '#app',\r\n  data: {\r\n    search: '',\r\n    loading: true,\r\n    dramaSerial: [],\r\n    dramaSerialIndex: 0,\r\n    searchResult: []\r\n  },\r\n  methods: {\r\n    handleSelect(index) {\r\n      this.dramaSerialIndex = index\r\n      $('.dramaSerialList dl').addClass('hide')\r\n      $('.dramaSerialList dl').eq(index).removeClass('hide')\r\n    },\r\n    handleSearch() {\r\n      this.searchResult = []\r\n      let dds = $('.dramaSerialList dd')\r\n      let dts = $('.dramaSerialList dt')\r\n      let ids = []\r\n      let resList = []\r\n      let valueArr = this.search.split(\"\")\r\n      let searchResult = []\r\n      valueArr.forEach((value) => {\r\n        dds.each((index, dd) => {\r\n          let content = $(dd).text()\r\n          if (content.indexOf(value) >= 0) {\r\n            let i = content.indexOf(value);\r\n            content = content.replace(eval('/' + value + '/g'), \"<span class=\\\"result\\\">\" + value + \"</span>\")\r\n            let title = dts.eq(index).text()\r\n            if (ids.indexOf(index) < 0) {\r\n              ids.push(index)\r\n              let result = {\r\n                count: 0,\r\n                res: content,\r\n                title: title,\r\n                id: index\r\n              }\r\n              resList.push(result)\r\n            } else {\r\n              let result = resList[ids.indexOf(index)]\r\n              result.count++\r\n              let res = result.res\r\n              result.res = res.replace(eval('/' + value + '/g'), \"<span class=\\\"result\\\">\" + value + \"</span>\")\r\n            }\r\n          }\r\n        })\r\n      })\r\n      resList.sort((res1, res2) => {\r\n        return (res2.count - res1.count) || (res1.id - res2.id);\r\n      })\r\n      console.log(searchResult)\r\n      resList.forEach(result => {\r\n        if (valueArr.length <= 2 || result.count >= (valueArr.length / 2)) {\r\n          searchResult.push(result)\r\n        }\r\n      })\r\n      this.searchResult = searchResult\r\n    }\r\n  },\r\n  mounted() {\r\n    $.get('/load', data => {\r\n      let length = data.match(/<dd>/g).length\r\n      let dramaSerial = []\r\n      for (let i = 1; i <= length; i += 5) {\r\n        dramaSerial.push(`${i}-${(i+4) > length ? length : (i+4)}`)\r\n      }\r\n      this.dramaSerial = dramaSerial\r\n      let Jdata = $(data)\r\n      Jdata.find('dl').addClass('hide')\r\n      Jdata.find('dl:first').removeClass('hide')\r\n      Jdata.find('dt').each(function (i) {\r\n        this.id = `til${i}`\r\n      })\r\n      $('#juqing').append(Jdata)\r\n      this.loading = false\r\n    })\r\n  }\r\n})\r\n\r\ndocument.addEventListener('touchmove', function (event) {\r\n  if (event.cancelable) {\r\n    // 判断默认行为是否已经被禁用\r\n    if (!event.defaultPrevented) {\r\n      event.preventDefault();\r\n    }\r\n  }\r\n})"]}